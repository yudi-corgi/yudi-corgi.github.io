import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as p,a,b as k,d as h,S as i,T as l,r as e,o as r}from"./app-lbP2pTVN.js";const d="/assets/Binder%E5%AE%9E%E7%8E%B0-DTuckYBa.png",g="/assets/stream2-IDEA%E6%8E%A7%E5%88%B6%E5%8F%B0-Ch6_2Cct.jpg",B="/assets/%E6%B6%88%E6%81%AF%E5%A4%B4%E5%B1%9E%E6%80%A7-0bJil2XE.jpg",A="/assets/%E5%9F%BA%E7%A1%80%E6%B6%88%E6%81%AF%E5%A4%B4%E5%B1%9E%E6%80%A7-DHO1Ezyj.png",y="/assets/stream2-IDEA%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%BF%A1%E6%81%AF2-iu-efLz7.png",F="/assets/GUI%E9%98%9F%E5%88%97%E4%BF%A1%E6%81%AF-DUvsE0LO.png",o="/assets/stream2-IDEA%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%BF%A1%E6%81%AF3-EKMZmVtD.jpg",c={};function E(C,s){const n=e("RouteLink");return r(),p("div",null,[a("p",null,[h(n,{to:"/posts/framework/spring/spring_cloud_stream_one.html"},{default:l(()=>s[0]||(s[0]=[i("ä¸Šç¯‡")])),_:1,__:[0]}),s[1]||(s[1]=i("ä¸»è¦è®²äº† Spring Cloud Stream çš„åŸºç¡€ç”¨æ³•ä»¥åŠå¯¹ RabbitMQ çš„é…ç½®ä½¿ç”¨ï¼Œä½†è‹¥åªçœ‹è¿™ç‚¹ï¼Œé‚£ä¹ˆè·Ÿ Spring Boot é›†æˆ MQ çš„æ–¹å¼æ¯”èµ·æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆçªå‡ºçš„åœ°æ–¹ã€‚Spring Cloud Stream å¼ºå¤§ä¹‹å¤„æ˜¯åœ¨äºéšè—äº†å„ç±» MQ ä¸åŒä¸”ï¼ˆå¯èƒ½ï¼‰ç¹ççš„é…ç½®å’Œä»£ç æ“ä½œï¼Œæä¾›äº†ç»Ÿä¸€çš„æ¦‚å¿µï¼ˆBinderã€Bindingã€Messageï¼‰ã€é…ç½®ï¼ˆè¾“å…¥/è¾“å‡ºç»‘å®šã€ç”Ÿäº§/æ¶ˆè´¹ï¼‰ã€æ¶ˆæ¯æ”¶å‘ API ä»¥åŠå‡½æ•°å®šä¹‰ï¼Œç”¨ä¸€å¥—åšæ³•å°±å®Œæˆå¯¹ä¸åŒ MQ ç³»ç»Ÿçš„ä½¿ç”¨ã€‚è¿™å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰~~~ï¼Ÿå…¶å®è¿™å°±æ˜¯é—¨é¢ï¼ˆæˆ–å¤–è§‚ï¼‰æ¨¡å¼çš„ä½“ç°ï¼Œç±»ä¼¼ SLF4J æ—¥å¿—ã€Spring çš„ ApplicationContext ç­‰ï¼Œéšè—äº†èƒŒåä¾èµ–åº“ã€æ¡†æ¶æˆ–å…¶å®ƒå¯¹è±¡çš„å¤æ‚å®ç°ï¼Œæä¾›ä¸€ä¸ªç®€å•çš„é—¨é¢æ¥å£æ¥ä½¿ç”¨ã€‚"))]),s[12]||(s[12]=k('<h2 id="binder" tabindex="-1"><a class="header-anchor" href="#binder"><span>Binder</span></a></h2><p>Binder ä½œä¸ºä¸å„ä¸ª MQ ç³»ç»Ÿé›†æˆçš„æ ¸å¿ƒï¼ŒStream é‡‡ç”¨ Spring Boot è¿›è¡Œé…ç½®ï¼ˆä¹Ÿå°±æ˜¯å…·ä½“çš„ MQ æœåŠ¡ç¯å¢ƒé…ç½®ã€è¿æ¥è·Ÿ Spring Boot é›†æˆ MQ ä¸€è‡´ï¼‰ï¼ŒBinder æŠ½è±¡ä½¿ Stream åº”ç”¨ç¨‹åºèƒ½å¤Ÿçµæ´»åœ°è¿æ¥ä¸­é—´ä»¶ï¼Œå¦‚å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©å¤–éƒ¨ç›®æ ‡ï¼ˆå¦‚ Kafka-Topic æˆ– RabbitMQ-Excahngeï¼‰ä¸æ¶ˆæ¯å¤„ç†ç¨‹åºçš„è¾“å…¥å’Œè¾“å‡ºï¼ˆä¾‹å¦‚å‡½æ•°çš„è¾“å…¥å‚æ•°åŠå…¶è¿”å›å‚æ•°ï¼‰ä¹‹é—´çš„æ˜ å°„ã€‚åŒæ—¶ Binder æŠ½è±¡ä¹Ÿæ˜¯ Stream çš„æ‰©å±•ç‚¹ï¼Œè¿™æ„å‘³ç€å¼€å‘äººå‘˜å¯æ ¹æ®éœ€æ±‚å®ç°è‡ªå·±çš„ Binderï¼Œå®˜ç½‘å¯¹æ­¤å·²æœ‰<a href="https://docs.spring.io/spring-cloud-stream/reference/spring-cloud-stream/overview-binder-abstraction.html" target="_blank" rel="noopener noreferrer">è¯´æ˜</a>ã€‚</p><p>Stream æœ¬èº«æä¾›äº†å¤šä¸ª MQ çš„ Binder å®ç°ï¼Œå¦‚ä¸‹å›¾ï¼ˆæ ‡æœ‰ <em>partner maintain</em> è¯´æ˜å¹¶é Spring Cloud Stream å®˜æ–¹æä¾›è€Œæ˜¯ç”± MQ å‚å•†è‡ªå·±å¼€å‘æ¥å…¥ï¼‰ã€‚</p><figure><img src="'+d+`" alt="Binder å®ç°" tabindex="0" loading="lazy"><figcaption>Binder å®ç°</figcaption></figure><h3 id="å¤š-binder-å®ä¾‹é…ç½®" tabindex="-1"><a class="header-anchor" href="#å¤š-binder-å®ä¾‹é…ç½®"><span>å¤š Binder å®ä¾‹é…ç½®</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # å½“é…ç½®å¤šä¸ª Binder æ—¶ï¼Œæ­¤é¡¹å¿…é¡»é…ç½®ï¼Œå¦åˆ™å¯åŠ¨æŠ¥é”™ </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      default-binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbit1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      binders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # binder è‡ªå®šä¹‰åç§°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        rabbit1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">          # å¯å¡« rabbitã€kafkaï¼Œå…¶å®ƒ Binder å®ç°æœ‰è‡ªå·±çš„ç¯å¢ƒé…ç½®æ–¹å¼ï¼ŒæŸ¥çœ‹å¯¹åº”çš„ Binder å®˜æ–‡å³å¯ </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbit</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              rabbitmq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">admin</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                password</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">admin123</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5672</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        rabbit2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbit</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              rabbitmq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">127.0.0.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">admin</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                password</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">admin123</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5672</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä»¥ä¸Šä¾¿æ˜¯å¯¹ RabbitMQ Binder çš„å¤šå®ä¾‹ç¯å¢ƒé…ç½®ï¼Œè‹¥åŒæ—¶é…ç½®äº† <code>spring.rabbitmq.*</code> çš„ç¯å¢ƒé…ç½®ï¼Œé‚£ä¹ˆåè€…ä¼˜å…ˆçº§ä¼šæ›´é«˜ï¼Œè¦æ³¨æ„ã€‚</p><p>éšååªéœ€è¦åœ¨ç»‘å®šä¸­å£°æ˜ä½¿ç”¨çš„ Binder å³å¯ï¼Œä¸æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤ Binderï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      bindings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        demoConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">demo-consumer-topic</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbit2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ä¸åŒ-mq-çš„äº’åŠ¨" tabindex="-1"><a class="header-anchor" href="#ä¸åŒ-mq-çš„äº’åŠ¨"><span>ä¸åŒ MQ çš„äº’åŠ¨</span></a></h3><p>åœ¨å¼‚æ„ç³»ç»Ÿä¸­ï¼Œæ¥å…¥ä¸åŒ MQ ç³»ç»Ÿæ˜¯æœ‰å¯èƒ½çš„ï¼Œæ¯”å¦‚ A ç³»ç»Ÿé€šè¿‡ RabbitMQ ç”Ÿäº§æ¶ˆæ¯ï¼Œç»è¿‡æ¶ˆæ¯å¤„ç†æœåŠ¡åä¼šæµè½¬è‡³ B ç³»ç»Ÿï¼Œè€Œ B ç³»ç»Ÿä½¿ç”¨çš„æ˜¯ Kafkaï¼Œé‚£ä¹ˆè¿™ä¸ªæ¶ˆæ¯å¤„ç†æœåŠ¡è‡ªç„¶å°±è¦åŒæ—¶æ¥å…¥ RabbitMQã€Kafka äº†ã€‚è™½ç„¶è¯´ä¾é  Spring Boot å¯¹ RabbitMQã€Kafka çš„é›†æˆä¹Ÿèƒ½æ˜¯èƒ½è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯åœ¨æ­¤ç§æ–¹å¼ä¸‹ï¼Œå„ç±» MQ ä¸åŒçš„é…ç½®ã€API æ“ä½œæ··åˆä½¿ç”¨ä¼šä¸ºç³»ç»Ÿå¸¦æ¥å¤æ‚æ€§ï¼Œæé«˜äº†ç»´æŠ¤æˆæœ¬ï¼Œè€Œè¿™æ—¶é€‰æ‹© Stream æ¥ç»Ÿä¸€ MQ çš„æ“ä½œåˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ¡ˆã€‚</p><p>åœ¨ä¸Šæ–¹çš„é…ç½®ä¸­åªæ˜¯ä½¿ç”¨äº† RabbitMQï¼Œç°åœ¨å†è¡¥å……ä¸€ä¸‹ Kafkaï¼Œä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼ˆè®°å¾—å¼•å…¥ <code>stream-kafka</code> ä¾èµ–ï¼‰ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      binders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # è‡ªå®šä¹‰ Binder åç§°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        kafka1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">          # ç±»å‹å¡« Kafka</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kafka</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                  kafka</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                    binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                      brokers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost:9092</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                      auto-create-topics</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   # è‡ªåŠ¨åˆ›å»º Topic</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                      auto-add-partitions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è‡ªåŠ¨æ·»åŠ åˆ†åŒº</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                      min-partition-count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     # åˆ›å»ºçš„ä¸»é¢˜æœ€å°åˆ†åŒºæ•°ï¼Œé»˜è®¤ 1ï¼Œå¿…é¡»ä¸Šé¢ä¸¤ä¸ªå±æ€§éƒ½ä¸º true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¸Šè¿°é…ç½®çœ‹èµ·æ¥æœ‰ç‚¹å†—ä½™ï¼Œä½†é…ç½®éœ€æ±‚ä¾¿æ˜¯å¦‚æ­¤ğŸ˜‚ã€‚åŒæ ·ä¼šè·Ÿ Spring é›†æˆ Kafka æ—¶ä½¿ç”¨çš„ <code>spring.kafka.bootstrap-servers</code> ç¯å¢ƒé…ç½®å†²çªï¼Œåè€…ä¼˜å…ˆçº§é«˜ã€‚</p><p>æ¥ä¸‹æ¥æ¼”ç¤ºä¸‹ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼šå‘ RabbitMQ å‘é€æ¶ˆæ¯åï¼Œç»è¿‡æ¶ˆè´¹å¤„ç†å†è·¯ç”±è‡³ Kafka æ¶ˆè´¹ã€‚ç›´æ¥ä¸Šä»£ç ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ­¤å¤„çœç•¥ Binder é…ç½®ï¼ŒæŒ‰ç…§ä¸Šé¢é…ç½®å³å¯</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  	function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  	  definition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbitConsumer;kafkaConsumer</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      bindings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # åˆ†åˆ«é…ç½®ä¸¤ä¸ª MQ çš„è¾“å…¥ç»‘å®šï¼Œæ³¨æ„ binder é€‰æ‹©</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        rabbitConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbit-exchange</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbit-queue</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rabbit1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        kafkaConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kafka-topic</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kafka-group</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kafka1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MQHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StreamBridge</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> rabbitConsumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> msg </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;RabbitMQ æ¶ˆè´¹æ¶ˆæ¯ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">forEach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((k, v) </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(k </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> v));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™åå†å‘å¾€ Kafka</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            msg </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> MessageBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">withPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toUpperCase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;kafkaConsumer-in-0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, msg);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> kafkaConsumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> msg </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Kafka æ¶ˆè´¹æ¶ˆæ¯ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">forEach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((k, v) </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(k </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> v));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/send&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DemoController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StreamBridge</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/demo&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> demo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Message</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">msg</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> MessageBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">withPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello World&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;rabbitConsumer-in-0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, msg);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="`+g+`" alt="æ§åˆ¶å°ä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>æ§åˆ¶å°ä¿¡æ¯</figcaption></figure><h2 id="æ­»ä¿¡é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#æ­»ä¿¡é˜Ÿåˆ—"><span>æ­»ä¿¡é˜Ÿåˆ—</span></a></h2><p>æ¥ä¸‹æ¥å±•ç¤º Stream å¦‚ä½•å®ç° MQ çš„æ­»ä¿¡é˜Ÿåˆ—ï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯ä¾é é…ç½®å°±å®Œæˆäº†ï¼ŒåŒæ ·ä»¥ Rabbit MQ ä¸ºä¾‹ã€‚</p><p>åœ¨æ­¤å…ˆè·Ÿå¤§å®¶å›é¡¾ä¸€éï¼ŒRabbitMQ ä¸­æ¶ˆæ¯æˆä¸ºæ­»ä¿¡çš„ä¸‰ç§æƒ…å†µï¼š</p><ul><li>å½“æ¶ˆæ¯è¢«æ‹’ç» ACKï¼Œå¹¶ä¸”ä¸é‡å›é˜Ÿåˆ—</li><li>æ¶ˆæ¯ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰è¿‡æœŸ</li><li>é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦æ— æ³•å†å®¹çº³æ¶ˆæ¯</li></ul><p>å…ˆçœ‹ä¸‹æ¶ˆæ¯ TTL å’Œé˜Ÿåˆ—é•¿åº¦çš„é…ç½®ï¼Œåªè¦åˆ†åˆ«é…ç½®å¯¹åº”çš„å±æ€§å³å¯ï¼š</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-properties"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŒ‡å®šé˜Ÿåˆ—æ¶ˆæ¯çš„è¶…æ—¶æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">spring.cloud.stream.rabbit.bindings.&lt;binding-name&gt;.</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">consumer.ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">5000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŒ‡å®šé˜Ÿåˆ—çš„æœ€å¤§æ¶ˆæ¯æ•°</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">spring.cloud.stream.rabbit.bindings.&lt;binding-name&gt;.</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">consumer.max-length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">10</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŒ‡å®šé˜Ÿåˆ—æ‰€æœ‰æ¶ˆæ¯çš„æœ€å¤§æ€»å­—èŠ‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">spring.cloud.stream.rabbit.bindings.&lt;binding-name&gt;.</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">consumer.max-length-bytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">1024</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å†æ¥è¯´è¯´æ¶ˆæ¯æ‹’ç»ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†æ¶ˆæ¯æ¥æ”¶åçš„ ACKï¼Œåœ¨åŸæ¥çš„ Spring é›†æˆ RabbitMQ ä¸­ï¼Œéœ€è¦åœ¨æ¶ˆæ¯ç›‘å¬å™¨ä¸­é€šè¿‡ Channel å¯¹è±¡æ‰èƒ½è¿›è¡Œæ“ä½œï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MQHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RabbitListener</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">queues</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;queueName&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Channel</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> channel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // do something...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        channel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">basicAck</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessageProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeliveryTag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç çš„æ¶ˆæ¯ç›‘å¬æ–¹æ³•ä¸­ Spring ä¼šå¸®åŠ©æˆ‘ä»¬ä¼ å…¥ Channel å¯¹è±¡ï¼Œä½† Stream ç¨‹åºä¸­éƒ½æ˜¯ä¾é  <strong>Consumer</strong>ã€<strong>Function</strong> è¿›è¡Œæ¶ˆæ¯å¤„ç†å¹¶è‡ªåŠ¨å®Œæˆ ACKï¼Œå‡ºå…¥å‚éƒ½åªæœ‰ <code>Message</code>ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆè·å– Channel å¯¹è±¡å‘¢ï¼Ÿå…¶å®ç­”æ¡ˆå°±åœ¨æ¶ˆæ¯çš„ <code>MessageHeaders</code> ä¸­ã€‚</p><p>é¦–å…ˆè®¾ç½®ç»‘å®šä¸ºæ‰‹åŠ¨ ACKï¼š</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-properties"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">spring.cloud.stream.rabbit.bindings.&lt;binding-name&gt;.</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">consumer.acknowledge-mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">manual</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¹‹ååœ¨æ¶ˆæ¯æ¶ˆè´¹æ—¶ï¼Œå°±å¯ä»¥ä»æ¶ˆæ¯çš„ MessageHeaders å±æ€§ä¸­å–åˆ° Channel å¯¹è±¡è¿›è¡Œæ“ä½œï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MQHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> stringConsumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> msg </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ¶ˆæ¯æ¶ˆè´¹ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            MessageHeaders</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> headers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            headers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">forEach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((k, v) </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(k </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> v));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å–åˆ° Channel é€šé“</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Channel</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> amqpChannel</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> headers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">AmqpHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">CHANNEL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Channel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> amqpDeliveryTag</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> headers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">AmqpHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">DELIVERY_TAG</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                assert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> amqpChannel </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // æ‹’ç» ACK æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¸é‡å›é˜Ÿåˆ—ï¼ˆå‚æ•°ä¸‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                amqpChannel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">basicNack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Optional</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ofNullable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(amqpDeliveryTag).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">orElse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // ACK ç¡®è®¤æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                amqpChannel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">basicAck</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Optional</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ofNullable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(amqpDeliveryTag).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">orElse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="`+B+'" alt="æ–­ç‚¹æŸ¥çœ‹æ¶ˆæ¯ MessageHeaders ä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>æ–­ç‚¹æŸ¥çœ‹æ¶ˆæ¯ MessageHeaders ä¿¡æ¯</figcaption></figure><p>è¿™é‡Œæœ‰ä¸¤ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„ç‚¹ï¼š</p>',33)),a("ul",null,[s[11]||(s[11]=a("li",null,[i("é¦–å…ˆå¿…é¡»è®¾ç½® "),a("code",null,"acknowledge-mode=manual"),i("ï¼Œæ‰èƒ½åœ¨ "),a("code",null,"MessageHeader"),i(" ä¸­è·å–åˆ° "),a("code",null,"amqp_channel"),i(" å±æ€§ä¿¡æ¯ï¼›")],-1)),a("li",null,[s[4]||(s[4]=i("å…¶æ¬¡ï¼Œä½¿ç”¨ ")),s[5]||(s[5]=a("strong",null,"StreamBridge",-1)),s[6]||(s[6]=i(" å‘é€æ¶ˆæ¯æ—¶ä¸èƒ½æŒ‡å®šè¾“å…¥ç»‘å®šå»å‘é€æ¶ˆæ¯ï¼Œå¿…é¡»æŒ‡å®šå…¶è¾“å‡ºç»‘å®šæˆ–è€…é‡‡ç”¨")),h(n,{to:"/posts/framework/spring/spring_cloud_stream_one.html#dynamic-destination"},{default:l(()=>s[2]||(s[2]=[i("åŠ¨æ€ç›®çš„åœ°")])),_:1,__:[2]}),s[7]||(s[7]=i("çš„æ–¹å¼ï¼Œå¦åˆ™è·å–åˆ°çš„ ")),s[8]||(s[8]=a("code",null,"MessageHeaders",-1)),s[9]||(s[9]=i(" å°†åªåŒ…å«åŸºç¡€ä¿¡æ¯è€Œå·²ï¼ˆåŸå› åœ¨")),h(n,{to:"/posts/framework/spring/spring_cloud_stream_one.md/#dynamic-destination"},{default:l(()=>s[3]||(s[3]=[i("ç¬¬ä¸€ç¯‡")])),_:1,__:[3]}),s[10]||(s[10]=i("å°±å·²ç»æåˆ°äº†ï¼‰ã€‚"))])]),s[13]||(s[13]=k(`<div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ— æ³•ç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">StreamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demoConsumer-in-0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, msg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ­£å¸¸ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">StreamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demoConsumer-out-0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, msg);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æŒ‡å®šè¾“å…¥ç»‘å®šçš„ destination</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">StreamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demoConsumer-exchange&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, msg);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="`+A+`" alt="æŒ‡å®šè¾“å…¥ç»‘å®šå‘é€æ¶ˆæ¯åè·å–çš„ MessageHeaders" tabindex="0" loading="lazy"><figcaption>æŒ‡å®šè¾“å…¥ç»‘å®šå‘é€æ¶ˆæ¯åè·å–çš„ MessageHeaders</figcaption></figure><p>OKï¼Œè¯´å®Œæ¶ˆæ¯æˆä¸ºæ­»ä¿¡çš„æ“ä½œï¼Œæˆ‘ä»¬å›åˆ°æ­»ä¿¡é˜Ÿåˆ—å¦‚ä½•ä½¿ç”¨çš„ä¸»çº¿ä¸Šï¼Œå…ˆä¸Šé…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      definition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">normalConsumer;deadLetterConsumer</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      rabbit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        bindings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          normalConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              queue-name-group-only</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              acknowledge-mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">manual</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              max-length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              max-length-bytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # æ˜¯å¦ç»‘å®š DLQ åˆ°æ­»ä¿¡äº¤æ¢æœºï¼Œé»˜è®¤ falseï¼Œè‹¥æœªæŒ‡å®šä¸‹é¢çš„ DLQ/DLXï¼Œåˆ™è‡ªåŠ¨ç”Ÿæˆçš„</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # æ­»ä¿¡äº¤æ¢æœºåç§°ä¸º prefix + DLXï¼ˆdirectï¼‰ï¼Œæ­»ä¿¡é˜Ÿåˆ—ä¸º {group}.dlqï¼Œè·¯ç”±é”®ä¸º {group}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              auto-bind-dlq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # è‡ªå®šä¹‰æ­»ä¿¡äº¤æ¢æœºåŠå…¶é˜Ÿåˆ—</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              dead-letter-exchange</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dead-letter-exchange</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              dead-letter-exchange-type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">direct</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              dead-letter-queue-name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dead-letter-queue</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              dead-letter-routing-key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dead-letter-key</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              dlq-ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # è¶…è¿‡é‡è¯•æ¬¡æ•°ä¾æ—§å¤±è´¥åï¼Œæ¶ˆæ¯ä¼šå‘å…¥ DLQï¼Œé»˜è®¤ trueï¼Œä¼šå°†é”™è¯¯å †æ ˆä¿¡æ¯æ”¾åœ¨æ¶ˆæ¯ header ä¸­</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              republish-to-dlq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # æŒ‡ç¤ºé™¤äº†é”™è¯¯å †æ ˆä¿¡æ¯å¤–ï¼Œæ¶ˆæ¯å…¶å®ƒ header æ‰€èƒ½å ç”¨çš„å­—èŠ‚å¤§å°ï¼Œé»˜è®¤ 20000</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              frame-max-headroom</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">          # æ¶ˆè´¹æ­»ä¿¡é˜Ÿåˆ—æ•°æ®çš„è¾“å…¥ç»‘å®šé…ç½®ï¼Œè¦å®Œå…¨è·Ÿä¸Šé¢æ­»ä¿¡ä¿¡æ¯çš„é…ç½®ä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          deadLetterConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              exchange-type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">direct</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              queue-name-group-only</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              binding-routing-key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dead-letter-key</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      bindings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        normalConsumer-out-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">normal-consumer-exchange</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        normalConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">normal-consumer-exchange</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">normal-consumer-queue</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">          	# æ¶ˆè´¹é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ 3 æ¬¡ï¼Œæ­é… republish-to-dlqï¼Œè‹¥æ˜¯æ¶ˆè´¹é€»è¾‘æœ¬èº«æœ‰é”™è¯¯ï¼Œé‡è¯•å¤±è´¥ä¹Ÿå¯å°†æ¶ˆæ¯å‘å¾€ DLQ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            max-attempts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        deadLetterConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dead-letter-exchange</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dead-letter-queue</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç çš„é‡ç‚¹é™¤äº† <code>normalConsumer-in-0</code> çš„ <strong>DLX/DLQ</strong> é…ç½®ä¹‹å¤–ï¼Œè¿˜æœ‰ <code>deadLetterConsumer-in-0</code> çš„é…ç½®ï¼Œæ­»ä¿¡æ¶ˆæ¯ä¸€èˆ¬éƒ½éœ€è¦è¿›è¡Œé¢å¤–å¤„ç†ï¼Œ<code>deadLetterConsumer-in-0</code> ä¾¿æ˜¯å®ç°è¿™ä¸ªä½œç”¨ï¼Œä½†å¯¹äºå®ƒæ¥è¯´å…¶å®æ ¹æœ¬ä¸çŸ¥é“æœ‰æ­»ä¿¡æ¶ˆæ¯è¿™å›äº‹ï¼Œå®ƒåªä¼šç›‘å¬æ˜¯å¦å·²æœ‰ç»‘å®šçš„äº¤æ¢æœºå’Œé˜Ÿåˆ—ï¼ˆæœ‰åˆ™åŒ¹é…ï¼Œæ— åˆ™åˆ›å»ºï¼‰ï¼Œä»¥åŠé˜Ÿåˆ—æ˜¯å¦æœ‰æ¶ˆæ¯å¯è¿›è¡Œæ¶ˆè´¹ï¼Œæ‰€ä»¥ <code>deadLetterConsumer-in-0</code> çš„é…ç½®å°±å¾—è·Ÿ <code>normalConsumer-in-0</code> <strong>DLX</strong> çš„é…ç½®ä¸€è‡´ï¼Œå¦åˆ™å°±ä¼šæç¤ºé¢„æœŸçš„é…ç½®ä¿¡æ¯ä¸å·²å­˜åœ¨çš„äº¤æ¢æœºï¼ˆæˆ–é˜Ÿåˆ—ï¼‰ä¸ä¸€è‡´ï¼Œä»è€Œå¯¼è‡´æ­»ä¿¡é˜Ÿåˆ—çš„æ¶ˆæ¯æ— æ³•è¢«æ­£å¸¸æ¶ˆè´¹ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯ä»£ç ï¼Œæ‹’ç» ACK å¹¶ä¸”ä¸é‡å›é˜Ÿåˆ—æ¥æ„é€ æ­»ä¿¡ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MQHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * æ™®é€šæ¶ˆæ¯æ¶ˆè´¹å‡½æ•°ï¼Œæ‰‹åŠ¨æ‹’ç» ACK è®©æ¶ˆæ¯è¿›å…¥ DLQ</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> normalConsumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> msg </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ‹’ç»æ¶ˆæ¯æˆä¸ºæ­»ä¿¡ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            MessageHeaders</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> headers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Channel</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> amqpChannel</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> headers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">AmqpHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">CHANNEL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Channel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> amqpDeliveryTag</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> headers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">AmqpHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">DELIVERY_TAG</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // do something... æ¶ˆæ¯æ¶ˆè´¹é”™è¯¯è¿›è¡Œæ‹’ç»</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                assert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> amqpChannel </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // æ‹’ç» ack ä¸”ä¸é‡å…¥é˜Ÿåˆ—ï¼Œæ„é€ æ­»ä¿¡æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                amqpChannel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">basicNack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Optional</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ofNullable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(amqpDeliveryTag).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">orElse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * æ­»ä¿¡æ¶ˆæ¯æ¶ˆè´¹å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deadLetterConsumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> msg </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ­»ä¿¡æ¶ˆæ¯æ¶ˆè´¹ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/send&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SendController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StreamBridge</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demo&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> demo2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Message</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> MessageBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">withBody</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello World&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">StandardCharsets</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UTF_8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;normalConsumer-out-0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, msg);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å½“å¯åŠ¨æœåŠ¡åè°ƒç”¨æ¥å£å°±ä¼šçœ‹åˆ°æ§åˆ¶å°æ‰“å°å¦‚ä¸‹ï¼š</p><figure><img src="`+y+'" alt="æ§åˆ¶å°ä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>æ§åˆ¶å°ä¿¡æ¯</figcaption></figure><p>æŸ¥çœ‹ RabbitMQ GUI ä¹Ÿèƒ½çœ‹åˆ°é˜Ÿåˆ—å·²ç»‘å®š DLXï¼š</p><figure><img src="'+F+`" alt="GUI é˜Ÿåˆ—ä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>GUI é˜Ÿåˆ—ä¿¡æ¯</figcaption></figure><h2 id="å»¶è¿Ÿé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#å»¶è¿Ÿé˜Ÿåˆ—"><span>å»¶è¿Ÿé˜Ÿåˆ—</span></a></h2><p>RabbitMQ å»¶è¿Ÿé˜Ÿåˆ—ä½¿ç”¨éœ€è¦æ’ä»¶ <code>rabbitmq_delayed_message_exchange</code> çš„æ”¯æŒï¼Œå…³äºæ’ä»¶å¦‚ä½•æŸ¥çœ‹ã€å®‰è£…ã€å¯ç”¨ï¼Œç½‘ä¸Šå·²æœ‰ä¼—å¤šèµ„æ–™ï¼Œå°±ä¸åœ¨æ­¤èµ˜è¿°ï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹ Stream ç¨‹åºä¸­çš„åº”ç”¨å°±è¡Œï¼Œæ¯”èµ·æ­»ä¿¡é˜Ÿåˆ—çš„é…ç½®å’Œä½¿ç”¨ï¼Œå»¶è¿Ÿé˜Ÿåˆ—å°±æ›´åŠ ç®€å•äº†ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      rabbit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        bindings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          demoConsumer-out-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            producer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              delayed-exchange</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # ç”¨ SpEL è¡¨è¾¾å¼æŒ‡å®šæ¶ˆæ¯çš„å»¶è¿Ÿæ—¶é—´è·å–ï¼Œè‹¥ä¸æƒ³æŒ‡å®šè¡¨è¾¾å¼ï¼Œå¯åœ¨æ¶ˆæ¯å¤´æ·»åŠ  x-delay å±æ€§æŒ‡å®šå»¶è¿Ÿæ—¶é•¿ï¼Œå•ä½ ms</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              delay-expression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;headers[&#39;first&#39;] == 1 ? 2000 : 3000&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          demoConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              queue-name-group-only</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # å¯ç”¨å»¶è¿Ÿäº¤æ¢æœºï¼Œä¼šæ ¹æ®è¯¥å€¼åˆ¤æ–­æ˜¯å¦åœ¨åˆ›å»ºäº¤æ¢æœºæ—¶æ·»åŠ å±æ€§ x-delayed-type</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              delayed-exchange</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      bindings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        demoConsumer-in-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">delay-consumer-exchange</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">delay-consumer-queue</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        demoConsumer-out-0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">delay-consumer-exchange</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MQHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Consumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> demoConsumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> msg </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å½“å‰æ¶ˆè´¹æ—¶é—´ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> LocalDateTime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ¶ˆæ¯å†…å®¹ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> msg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/send&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SendController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StreamBridge</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demo&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> demo2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Message</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">msg</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> MessageBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">withPayload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello World&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å»¶è¿Ÿæ—¶é—´çš„å›ºå®šå±æ€§æ˜¯ x-delayï¼Œä½†æ²¡æœ‰é…ç½® delay-expression æ—¶å¯ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // .setHeader(&quot;x-delay&quot;, 3000)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setHeader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;first&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ¶ˆæ¯å‘é€æ—¶é—´ï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> LocalDateTime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        streamBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demoConsumer-out-0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, msg);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="`+o+'" alt="æ§åˆ¶å°è¾“å‡º" tabindex="0" loading="lazy"><figcaption>æ§åˆ¶å°è¾“å‡º</figcaption></figure><p>åŒæ ·éœ€è¦æ³¨æ„ï¼ŒStreamBridge å‘é€æ¶ˆæ¯æ—¶è¦æŒ‡å®šè¾“å‡ºç»‘å®šæˆ–è€…åŠ¨æ€ç›®çš„åœ°ï¼Œè€Œä¸èƒ½æ˜¯è¾“å…¥ç»‘å®šï¼Œå¦åˆ™å»¶è¿ŸåŠŸèƒ½å¤±æ•ˆã€‚</p><h2 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“"><span>å°ç»“</span></a></h2><p>æœ¬ç¯‡æ‰€æè¿°çš„ Binderã€RabbitMQ æ­»ä¿¡/å»¶è¿Ÿé˜Ÿåˆ—çš„é…ç½®ä½¿ç”¨å…¶å®éƒ½ä¸éš¾ç†è§£ã€‚</p><p>Binder ä½“ç°äº† Stream çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„â€”â€”å®ƒæŠ½è±¡äº†åº•å±‚ MQ çš„å¤æ‚é…ç½®å’Œæ“ä½œï¼Œæä¾›äº†ç»Ÿä¸€çš„æ¥å£å’Œ APIï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°åœ¨ä¸åŒçš„ MQ ç³»ç»Ÿé—´åˆ‡æ¢ï¼Œè€Œæ— éœ€æ·±é™·äºæ¯ç§ MQ ç‰¹æœ‰çš„å®ç°ç»†èŠ‚ã€‚æ­»ä¿¡é˜Ÿåˆ—å’Œå»¶è¿Ÿé˜Ÿåˆ—ä½œä¸º RabbitMQ çš„é«˜çº§åŠŸèƒ½ï¼Œåœ¨ Stream çš„å¸®åŠ©ä¸‹ï¼Œå…¶é…ç½®ä¹Ÿå˜å¾—ç›´è§‚è€Œç®€æ´ã€‚</p><p>æ­¤å¤–ï¼Œä¸åªæ˜¯ RabbitMQï¼ŒStream ä¹Ÿä¸º Kafka æä¾›äº† DLX é…ç½®ï¼Œè‹¥è¯»è€…å¯¹äº Kafka æ­»ä¿¡é˜Ÿåˆ—æ˜¯å¦‚ä½•å®ç°çš„æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯ä»¥è¿½è¸ªæºç çœ‹çœ‹ <code>StreamBridge#send</code> æ–¹æ³•çš„æ‰§è¡Œæµç¨‹ï¼Œæ¢ç´¢å®ç°ç»†èŠ‚ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç³»åˆ—ç¬¬ä¸€ã€äºŒç¯‡éƒ½æ˜¯è®²è¿° Stream å¦‚ä½•ç®€åŒ–é…ç½®ã€ä½¿ç”¨ MQ æœ¬èº«æ‰€æ‹¥æœ‰çš„åŠŸèƒ½ï¼Œä¸‹ä¸€ç¯‡å°†ä»‹ç» Stream è‡ªå·±çš„ç‹¬ç‰¹åŠŸèƒ½ï¼š<strong>åˆ†åŒºã€å¤šè¾“å…¥/è¾“å‡ºå‚æ•°å‡½æ•°å®ç°</strong>ã€‚</p>',22))])}const b=t(c,[["render",E]]),f=JSON.parse('{"path":"/posts/framework/spring/spring_cloud_stream_two.html","title":"Spring Cloud Stream ç³»åˆ—ï¼ˆäºŒï¼‰","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"Spring Cloud Stream ç³»åˆ—ï¼ˆäºŒï¼‰","description":"è®²è¿° Spring Cloud Stream å¤š Binder é…ç½®å®ç°ä¸åŒ MQ ç³»ç»Ÿçš„æ— ç¼åˆ‡æ¢åŠæ­»ä¿¡ã€å»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨","tag":["Spring Cloud","MQ"],"date":"2024-01-07T00:00:00.000Z","sticky":true,"category":["Spring Cloud","MQ"],"cover":"/assets/images/minions_cover17.jpg","icon":"mdi:mq","isOriginal":true,"star":true,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Cloud Stream ç³»åˆ—ï¼ˆäºŒï¼‰\\",\\"image\\":[\\"https://blog.yudi-corgi.site/assets/images/minions_cover17.jpg\\"],\\"datePublished\\":\\"2024-01-07T00:00:00.000Z\\",\\"dateModified\\":\\"2025-06-11T03:35:55.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"YUDI-Corgi\\",\\"url\\":\\"https://github.com/yudi-corgi\\"}]}"],["meta",{"property":"og:url","content":"https://blog.yudi-corgi.site/posts/framework/spring/spring_cloud_stream_two.html"}],["meta",{"property":"og:site_name","content":"Black Hole"}],["meta",{"property":"og:title","content":"Spring Cloud Stream ç³»åˆ—ï¼ˆäºŒï¼‰"}],["meta",{"property":"og:description","content":"è®²è¿° Spring Cloud Stream å¤š Binder é…ç½®å®ç°ä¸åŒ MQ ç³»ç»Ÿçš„æ— ç¼åˆ‡æ¢åŠæ­»ä¿¡ã€å»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://blog.yudi-corgi.site/assets/images/minions_cover17.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-11T03:35:55.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://blog.yudi-corgi.site/assets/images/minions_cover17.jpg"}],["meta",{"name":"twitter:image:alt","content":"Spring Cloud Stream ç³»åˆ—ï¼ˆäºŒï¼‰"}],["meta",{"property":"article:tag","content":"MQ"}],["meta",{"property":"article:tag","content":"Spring Cloud"}],["meta",{"property":"article:published_time","content":"2024-01-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-11T03:35:55.000Z"}]]},"git":{"createdTime":1717087994000,"updatedTime":1749612955000,"contributors":[{"name":"YUDI-Corgi","username":"YUDI-Corgi","email":"1019509861@qq.com","commits":5,"url":"https://github.com/YUDI-Corgi"},{"name":"yudi-corgi","username":"yudi-corgi","email":"1019@qq.com","commits":1,"url":"https://github.com/yudi-corgi"}]},"readingTime":{"minutes":10.77,"words":3231},"filePathRelative":"posts/framework/spring/spring_cloud_stream_two.md","excerpt":"<p><a href=\\"/posts/framework/spring/spring_cloud_stream_one.html\\" target=\\"_blank\\">ä¸Šç¯‡</a>ä¸»è¦è®²äº† Spring Cloud Stream çš„åŸºç¡€ç”¨æ³•ä»¥åŠå¯¹ RabbitMQ çš„é…ç½®ä½¿ç”¨ï¼Œä½†è‹¥åªçœ‹è¿™ç‚¹ï¼Œé‚£ä¹ˆè·Ÿ Spring Boot é›†æˆ MQ çš„æ–¹å¼æ¯”èµ·æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆçªå‡ºçš„åœ°æ–¹ã€‚Spring Cloud Stream å¼ºå¤§ä¹‹å¤„æ˜¯åœ¨äºéšè—äº†å„ç±» MQ ä¸åŒä¸”ï¼ˆå¯èƒ½ï¼‰ç¹ççš„é…ç½®å’Œä»£ç æ“ä½œï¼Œæä¾›äº†ç»Ÿä¸€çš„æ¦‚å¿µï¼ˆBinderã€Bindingã€Messageï¼‰ã€é…ç½®ï¼ˆè¾“å…¥/è¾“å‡ºç»‘å®šã€ç”Ÿäº§/æ¶ˆè´¹ï¼‰ã€æ¶ˆæ¯æ”¶å‘ API ä»¥åŠå‡½æ•°å®šä¹‰ï¼Œç”¨ä¸€å¥—åšæ³•å°±å®Œæˆå¯¹ä¸åŒ MQ ç³»ç»Ÿçš„ä½¿ç”¨ã€‚è¿™å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰~~~ï¼Ÿå…¶å®è¿™å°±æ˜¯é—¨é¢ï¼ˆæˆ–å¤–è§‚ï¼‰æ¨¡å¼çš„ä½“ç°ï¼Œç±»ä¼¼ SLF4J æ—¥å¿—ã€Spring çš„ ApplicationContext ç­‰ï¼Œéšè—äº†èƒŒåä¾èµ–åº“ã€æ¡†æ¶æˆ–å…¶å®ƒå¯¹è±¡çš„å¤æ‚å®ç°ï¼Œæä¾›ä¸€ä¸ªç®€å•çš„é—¨é¢æ¥å£æ¥ä½¿ç”¨ã€‚</p>"}');export{b as comp,f as data};
